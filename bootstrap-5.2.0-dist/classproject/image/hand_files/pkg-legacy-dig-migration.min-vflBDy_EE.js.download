define("metaserver/static/js/clean/ui/modal_dig",["require","exports","tslib","classnames","dompurify","react","dig-components/buttons","dig-components/modal","dig-components/typography","metaserver/static/js/components/ui/css","metaserver/static/js/components/ui/modal_controller","metaserver/static/js/ux_analytics/utils","metaserver/static/js/core/i18n"],(function(t,e,a,s,n,o,r,i,l,d,p,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReactModal=e.SimpleModal=e.Modal=e.ModalWithCSS=e.ModalButtons=e.ModalButton=void 0,s=a.__importDefault(s),n=a.__importDefault(n),o=a.__importDefault(o),p=a.__importStar(p);const{Header:m,Footer:h,Body:f}=i.Modal;class b extends o.default.Component{constructor(t){super(t),this.state={open:!0},this.modal=o.default.createRef(),this.modalBox=o.default.createRef()}invokeCBThenCloseModal(t,e,a=!1){"function"==typeof t&&t.call(this,e);let s=e.defaultPrevented;"isDefaultPrevented"in e&&(s=e.isDefaultPrevented()),s||(this.props.autoClose||a)&&p.unmountModal()}dismissModal(t){const{onDismiss:e,onDismissCompleted:a}=this.props;this.invokeCBThenCloseModal(e,t,!0),a&&a.call(this,t)}onCancelActionClicked(t){this.dismissModal(t)}onAcceptActionClicked(t){const{onAccept:e}=this.props;this.invokeCBThenCloseModal(e,t)}componentDidMount(){(0,c.dispatchModalOpened)(),i.Modal.setAppElement(document.body)}componentWillUnmount(){(0,c.dispatchModalClosed)()}render(){const t=this.props,e={"db-modal-wrapper":!0,"uxa-modal":!0,"clean-react-modal":!0,"db-modal--default-maestro-style":"default-maestro"===t.style};t.className&&(e[t.className]=!0);const a=(0,s.default)(e),n=(0,c.getModalId)({id:t.id,className:t.className}),{open:d}=this.state,u=this.onCancelActionClicked.bind(this),b=this.onAcceptActionClicked.bind(this),v=t.onShow;return o.default.createElement("div",{className:a},o.default.createElement("div",{ref:this.modal,className:"db-modal db-modal__dig"},o.default.createElement("div",{ref:this.modalBox,className:"db-modal-box"},o.default.createElement(i.Modal,{open:d,className:`db-modal-${t.style}`,onRequestClose:u,onAfterOpen:v,"aria-labelledby":"db-modal-title",overlayClassName:"db-modal-overlay",ariaHideApp:!1,id:p.MODAL_ROOT_ID,"data-testid":p.MODAL_ROOT_TESTID,width:t.width||"standard",withCloseButton:p.CLOSE_BUTTON_TEXT},o.default.createElement("div",{className:"db-modal__dig-container",id:n},t.title&&o.default.createElement(m,{hasBottomSpacing:"title-standard",className:"db-modal-title",id:"db-modal-title"},o.default.createElement(l.Title,null,o.default.createElement("span",{className:"db-modal-title-text"},t.title))),o.default.createElement(f,{ref:this.modalContainer,className:"db-modal-content",hasVerticalSpacing:!1},t.children),o.default.createElement(h,{className:"db-modal-buttons"},t.buttonComponent?t.buttonComponent:o.default.createElement(o.default.Fragment,null,t.helpLink&&o.default.createElement(r.Button,{hasNoUnderline:!0,variant:"transparent",className:"dbmodal-extra-link-button db-modal__unclickable-parent"},t.helpLink),t.altAction&&o.default.createElement(r.Button,{hasNoUnderline:!0,variant:"transparent",className:"db-modal__alt-action db-modal__unclickable-parent"},t.altAction),t.dismissButtonText?o.default.createElement(r.Button,{className:"dbmodal-button dbmodal-button__cancel",key:"tertiary-dismiss",variant:"opacity",onClick:u},t.dismissButtonText):o.default.createElement("span",null),t.acceptButtonText&&o.default.createElement(r.Button,{className:"dbmodal-button dbmodal-button__accept",key:"primary",variant:"primary",disabled:t.acceptButtonDisabled,onClick:b,isLoading:t.submitting},t.acceptButtonText))))))))}}b.displayName="Modal",b.defaultProps={acceptButtonText:u.intl.formatMessage({id:"nOO9Qi",defaultMessage:"OK"}),dismissButtonText:null,buttonComponent:null,onAccept(){},onDismiss(){},onShow(){},autoClose:!0,style:"default",acceptButtonDisabled:!1};const v={show:t=>{const e={acceptButtonText:t.confirm_text,trackingIdPrefix:t.trackingIdPrefix,onAccept:t.confirm_callback,dismissButtonText:t.cancel_text,onDismiss:t.cancel_callback,onDismissCompleted:t.cancel_completed_callback,title:t.title_text,width:t.width,className:"simple-modal",autoClose:t.autoclose,style:t.style,onShow:t.on_show},a=t.body_react?o.default.createElement("div",{className:"simple-modal-content"},t.body_react):o.default.createElement("div",{className:"simple-modal-content",dangerouslySetInnerHTML:{__html:n.default.sanitize(t.body_html)}}),s=o.default.createElement(b,Object.assign({},e),a);return p.mountModal(s)}};e.SimpleModal=v;e.ModalButton=t=>{var{className:e,children:n}=t,i=a.__rest(t,["className","children"]);return o.default.createElement(r.Button,Object.assign({className:(0,s.default)(e,"dbmodal-button",`button-${i.variant}`,`dbmodal-button__${i.variant}`)},i),n)},e.ModalButton.displayName="ModalButton",e.ModalButton.displayName="ModalButton";e.ModalButtons=t=>{var{className:e}=t,n=a.__rest(t,["className"]);return o.default.createElement("div",Object.assign({className:(0,s.default)(e,"db-modal-buttons")},n))},e.ModalButtons.displayName="ModalButtons",e.ModalButtons.displayName="ModalButtons",e.ModalWithCSS=(0,d.requireCssWithComponent)(b,["/static/metaserver/static/css/dig-components/index.web-vflVpv-hZ.css"]),e.Modal=e.ModalWithCSS,e.ReactModal=e.ModalWithCSS})),define("metaserver/static/js/clean/ui/button_dig",["require","exports","tslib","classnames","react","dig-components/buttons","metaserver/static/js/core/browser"],(function(t,e,a,s,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.link_button=e.button=e.LinkButton=e.Button=void 0,s=a.__importDefault(s),n=a.__importDefault(n),r=a.__importStar(r);const i={secondary:"outline",tertiary:"transparent",styleless:"transparent",primary:"primary"},l=t=>{const e={};e[`button-${t.variant}`]=!(!t.variant||"standard"===t.variant);const n=t.importance||"primary";let o;o=i[n]?i[n]:"primary",t.importance&&"styleless"!==t.importance&&(e["button-"+t.importance]=!0,e[t.importance]=!0),t.className&&(e[t.className]=!0);const{importance:r,variant:l}=t,d=a.__rest(t,["importance","variant"]);return d.className=(0,s.default)(e),{digVariant:o,domAttributes:d}};class d extends n.default.Component{render(){const t=this.props,{digVariant:e,domAttributes:a}=l(t);return n.default.createElement(o.Button,Object.assign({},a,{variant:e}),t.children)}}e.Button=d,d.defaultProps={importance:"primary"},d.displayName="Button";class p extends n.default.Component{render(){const t=this.props,{domAttributes:e}=l(t);delete e.disabled;return n.default.createElement(o.Button,Object.assign({onClick:()=>{t.href&&r.open_tab(t.href)}},e,{variant:"transparent"}),t.children)}}e.LinkButton=p,p.defaultProps={importance:"primary"},p.displayName="LinkButton",e.button=d,e.link_button=p})),define("metaserver/static/js/clean/ui/input_dig",["require","exports","tslib","classnames","dig-components/text_fields","dig-components/typography","create-react-class","react","react-dom","ts-key-enum","metaserver/static/js/clean/ui/form_error_mixin","metaserver/static/js/clean/ui/sprite","metaserver/static/js/core/cancelable_promise","metaserver/static/js/core/i18n"],(function(t,e,a,s,n,o,r,i,l,d,p,c,u,m){"use strict";function h(t,e=!1){const a=function(e){if(t>=e)return"password-input-dot-selected"};let s="password-input-meter";e&&(s="password-input-meter-standalone");const n=i.default.createElement("div",{className:s,ref:"meter"},i.default.createElement("div",{className:`password-input-dot ${a(4)}`}),i.default.createElement("div",{className:`password-input-dot ${a(3)}`}),i.default.createElement("div",{className:`password-input-dot ${a(2)}`}),i.default.createElement("div",{className:`password-input-dot ${a(1)}`}));return e?i.default.createElement("span",{className:"standalone-password-meter-container"},n):n}Object.defineProperty(e,"__esModule",{value:!0}),e.textarea=e.text=e.password=e.password_strength_meter=void 0,s=a.__importDefault(s),r=a.__importDefault(r),i=a.__importDefault(i),l=a.__importStar(l),p=a.__importDefault(p),e.password_strength_meter=h;const f=function(e,f){return(0,r.default)({displayName:e+"."+f,mixins:[p.default],getDefaultProps:()=>({errorWrapperClassName:"text-input-error-wrapper",expandedWidthOffset:90,expandable:!1,animationCurve:"easeOutSine",animationDuration:300,compatiblePlaceholder:!1}),getInitialState(){return{inputWidth:0,expanded:!1,value:this.props.defaultValue}},zxcvbnPromise:void 0,UNSAFE_componentWillMount(){this.props.measureStrength&&(this.zxcvbnPromise=(0,u.makeCancelable)(new Promise((e,a)=>{t(["zxcvbn"],e,a)}).then(a.__importStar)),this.zxcvbnPromise.then(({default:t})=>{this.setState({zxcvbn:t})}))},componentWillUnmount(){this.zxcvbnPromise&&this.zxcvbnPromise.cancel()},componentDidMount(){this._renderFinished();const t=this.inputComponent.current.offsetWidth;return this.setState({inputWidth:t})},componentDidUpdate(){return this._renderFinished()},inputComponent:i.default.createRef(),render(){const t={"text-input-input":!0,autofocus:this.props.autofocus,"password-input":"password"===f},a={"text-input":!0,"text-wip-migration-wip":!0,"text-input-expandable":this.props.expandable,"text-input-inline":this.props.inline,"textarea-input":"textarea"===e};if(a[this.props.variant||"standard"]=!0,this.props.className){this.props.className.split(/\s/).forEach(t=>a[t]=!0)}const r=this.renderErrorIfEnabled();let l=void 0;((null!=this.props.error?this.props.error.message_text:void 0)||null!=(null!=this.props.error?this.props.error.message_html:void 0))&&(l=this.state.errorWrapperIdName);let d=n.TextInput;"textarea"===e&&(d=n.TextArea);const p={id:this.props.id,name:this.props.name,"aria-describedby":l,"aria-label":l,className:(0,s.default)(t),type:f,value:this.props.value||(null!=this.props.valueLink?this.props.valueLink.value:void 0)||this.state.value,onChange:this.onChangeInternal,onFocus:this.onFocusInternal,onBlur:this.onBlurInternal,onKeyDown:this.onKeyDownInternal,autoFocus:this.props.autofocus,ref:this.inputComponent,placeholder:this.props.placeholder&&"password"!==f?this.props.placeholder:""};for(const t in this.props)void 0===p[t]&&"autofocus"!==t&&(p[t]=this.props[t]);const u=i.default.createElement(d,Object.assign({},p));return i.default.createElement("div",{style:this.props.style,className:(0,s.default)(a)},!this.props["error-after"]&&r,i.default.createElement("div",{className:"text-input-wrapper"},this._renderPasswordStrengthBar(),u,this.props.expandable&&i.default.createElement("a",{href:"#",onClick:this.onCloseClick,ref:"closeButton",className:"close-button u-mar-left-xs"},i.default.createElement(c.Sprite,{group:"web",name:"xclose",alt:m.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"})})),this.props.placeholder&&"password"===f&&!(this.props.value||(null!=this.props.valueLink?this.props.valueLink.value:void 0)||this.state.value)&&i.default.createElement("div",{className:"password-placeholder-label"},i.default.createElement(o.Text,{size:"standard",tagName:"label",htmlFor:this.props.id},this.props.placeholder))),this.props["error-after"]&&r)},getValue(){return this.inputComponent.current.value},setValue(t){return this.inputComponent.current.value=t,this.setState({value:t})},resizeComponent(){const t=this.inputComponent.current;return t.style.height="1px",t.style.height=`${t.scrollHeight}px`},_renderPasswordStrengthBar(){return this.props.measureStrength?h(this.state.score):null},_renderFinished(){return this.props.autoresize&&this.resizeComponent(),"function"==typeof this.props.afterRender?this.props.afterRender():void 0},onCloseClick(t){if(null!=t&&t.preventDefault(),!this.props.expandable)return void("function"==typeof this.props.onCloseClick&&this.props.onCloseClick(t));const e=l.findDOMNode(this.refs.closeButton),a=this.inputComponent.current;return e.style.opacity="0",a.style.width=`${this.state.inputWidth}px`,"function"==typeof this.props.onCloseClick&&this.props.onCloseClick(t),this.setState({expanded:!1})},onChangeInternal(t){if("function"==typeof this.props.onChange&&this.props.onChange(t),null!=this.props.value||(this.props.valueLink?this.props.valueLink.requestChange(t.target.value):this.setState({value:t.target.value})),this.props.measureStrength){let e;return e=this.state.zxcvbn&&t.target.value?Math.max(1,this.state.zxcvbn(t.target.value).score):0,this.setState({score:e})}},onFocusInternal(t){if("function"==typeof this.props.onFocus&&this.props.onFocus(t),!1===this.props.expandable)return;const e=t.target,a=l.findDOMNode(this.refs.closeButton);let{inputWidth:s}=this.state;0===s&&(s=this.inputComponent.current.offsetWidth,this.setState({inputWidth:s}));const n=s+this.props.expandedWidthOffset,o=n-parseInt(e.style.paddingRight)+a.offsetWidth/2;return a.style.left=`${o}px`,e.style.width=`${n}px`,e.style.opacity="1",this.setState({expanded:!0})},onBlurInternal(t){const e=t.target.value;return!0===this.props.closeOnBlur&&0===e.length&&this.onCloseClick(),"function"==typeof this.props.onBlur?this.props.onBlur(t):void 0},onKeyDownInternal(t){if("function"==typeof this.props.onKeyDown&&this.props.onKeyDown(t),null!=this.state.expanded!=!1)switch(t.key){case d.Key.Escape:return t.target.blur(),this.onCloseClick()}}})};e.password=f("input","password"),e.text=f("input","text"),e.textarea=f("textarea","text")}));
//# sourceMappingURL=pkg-legacy-dig-migration.min.js-vflVRSGSO.map