define("metaserver/static/js/clean/privacy_consent_header",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getManualReEntryProvided=t.setManualReEntryProvided=void 0;let o=!1;t.setManualReEntryProvided=e=>{o=!!e};t.getManualReEntryProvided=()=>o})),define("metaserver/static/js/privacy_consent/privacy_consent_cookies",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsentCookieStore=t.createCookieStr=t.getAllowedCategories=t.getCookieStr=t.isEvidonCookieName=t.PRIVACY_CONSENT_COOKIE_NAMES=t.EVIDON_SUPPRESS_COOKIE_NAME=t.EVIDON_CONSENT_COOKIE_NAME=t.DNS_COOKIE_DEV_PREFIX=t.DNS_COOKIE_NAME=t.CCPA_TOKEN_COOKIE_NAME=t.SHADOW_COOKIE_NAME=void 0,t.SHADOW_COOKIE_NAME="__Secure-dbx_consent",t.CCPA_TOKEN_COOKIE_NAME="__Secure-dbx_ccpa_token",t.DNS_COOKIE_NAME="__Secure-dbx_do_not_sell",t.DNS_COOKIE_DEV_PREFIX=t.DNS_COOKIE_NAME+"_dev_",t.EVIDON_CONSENT_COOKIE_NAME="_evidon_consent_cookie",t.EVIDON_SUPPRESS_COOKIE_NAME="_evidon_suppress_notification_cookie",t.PRIVACY_CONSENT_COOKIE_NAMES=new Set([t.SHADOW_COOKIE_NAME,t.EVIDON_CONSENT_COOKIE_NAME,t.EVIDON_SUPPRESS_COOKIE_NAME,t.DNS_COOKIE_NAME,t.CCPA_TOKEN_COOKIE_NAME]);t.isEvidonCookieName=e=>!!t.PRIVACY_CONSENT_COOKIE_NAMES.has(e)||!!e.startsWith(t.DNS_COOKIE_DEV_PREFIX);function o(e){try{return String(document.cookie||"").split(";").map(e=>e.split("=")).map(e=>[e[0],e.slice(1).join(";")].map(e=>e.replace(/^[ \t]+|[ \t]+$/g,""))).reduce((e,[t,o])=>Object.assign(Object.assign({},e),{[t]:o}),Object.create({}))[e]||""}catch(e){return""}}var n,i;function s(e,t,o,n,i){const s={domain:e,path:"/",expires:n,samesite:i||"lax",secure:""};return[[t,JSON.stringify(o).replace(/[;]|[^ -~]/g,e=>"\\u"+(65536+e.charCodeAt(0)).toString(16).substring(1))],...Object.keys(s).map(e=>[e,s[e]])].map(([e,t])=>t?`${e}=${t}`:`${e}`).join(";")}function r(e,o,n,i,r){(0,t.isEvidonCookieName)(o)&&(document.cookie=s(e,o,n,i,r))}t.getCookieStr=o,(function(e){e[e.OptIn=1]="OptIn"})(n||(n={})),(function(e){e.StrictlyNecessary="strictly necessary",e.MarketingAdvertising="general marketing and advertising",e.Analytics="analytics",e.PerformanceFunctionality="performance and functionality",e.SocialMediaAdvertising="social media advertising",e.AllCookies="all"})(i||(i={})),t.getAllowedCategories=function(e){const t=Object.keys(i);let o=[];return e&&(e[i.AllCookies]?o=[...t]:t.forEach(t=>{e[i[t]]&&o.push(t)})),o},t.createCookieStr=s;const a={cookieDomain:"dropbox.com",consentDurationMonths:6};t.ConsentCookieStore=class{constructor(e,t){const o=Object.assign(Object.assign({},a),e);this.cookieDomain=o.cookieDomain,this.consentDurationMonths=o.consentDurationMonths,this.numDots=o.cookieDomain.split(".").length-1,this.log=t}hasUserInteracted(){var e;return!!(null===(e=this.getCurrentCookieObj(t.SHADOW_COOKIE_NAME))||void 0===e?void 0:e.userInteracted)}bakeShadowCookie(e){const o=new Date(e.expireDate).toUTCString();r(this.cookieDomain,t.SHADOW_COOKIE_NAME,e,o,"None")}bakeDNSCookie(e){const o=new Date(e.expireDate).toUTCString();r(this.cookieDomain,t.DNS_COOKIE_NAME,e,o)}bakeCCPATokenCookie(e){const o=new Date(e.expireDate).toUTCString();r(this.cookieDomain,t.CCPA_TOKEN_COOKIE_NAME,e,o)}createShadowCookieValue(e,o){const i=this.getCurrentCookieObj(t.SHADOW_COOKIE_NAME),s=!!i.userInteracted,r=!(!s&&o)&&i.consentDate?new Date(i.consentDate):new Date,a=new Date(r);return a.setMonth(r.getMonth()+this.consentDurationMonths),{consentType:n.OptIn,consentDate:r.toISOString(),expireDate:a.toISOString(),consentMonths:this.consentDurationMonths,categories:e,userInteracted:s||o,numDots:this.numDots}}mapCookies(e){var t;const o={};for(const n in e)if(e.hasOwnProperty(n)){const s=n.toLowerCase();Object.values(i).includes(s)?o[s]=e[n]:null===(t=this.log)||void 0===t||t.logInvalidCookieCategoryException(s)}return o}havePreferencesChanged(e){var n;const i=this.getCurrentCookieObj(t.SHADOW_COOKIE_NAME);if(i)try{const t=JSON.stringify(i.categories);return JSON.stringify(e)!==t}catch(e){return null===(n=this.log)||void 0===n||n.logCookieParseException(t.SHADOW_COOKIE_NAME,o(t.SHADOW_COOKIE_NAME)),!1}return!0}getAllowedCategories(){const e=this.getCurrentCookieObj(t.SHADOW_COOKIE_NAME),o=null==e?void 0:e.categories,n=Object.keys(i);let s=[];return o&&(o[i.AllCookies]?s=[...n]:n.forEach(e=>{o[i[e]]&&s.push(e)})),s}clearDNSCookie(){const e=new Date,o={[t.DNS_COOKIE_NAME]:"",domain:this.cookieDomain,path:"/",expires:e.toUTCString(),samesite:"lax",secure:""},n=Object.keys(o).map(e=>void 0!==o[e]?`${e}=${o[e]}`:`${e}`);document.cookie=n.join(";")}getCurrentCookieObj(e){var t;const n=o(e);if(n)try{return JSON.parse(n)}catch(o){return null===(t=this.log)||void 0===t||t.logCookieParseException(e,n),null}return{}}chop(e,t){const o=e.indexOf(t);return o>=0?[e.slice(0,o),e.slice(o+1)]:[e,""]}bakeEvidonCookie(e){if("dropbox.com"===this.cookieDomain)return;const o=e.split(";").map(e=>e.trim()),[n,i]=this.chop(o[0],"=").map(e=>e.trim());if(!(0,t.isEvidonCookieName)(n))return;const s=[[n,i],["domain",this.cookieDomain],["secure",""],["path","/"]];for(const e of o.slice(1)){const[t,o]=this.chop(e,"=").map(e=>e.trim());if("expires"===t.toLowerCase()){const e=new Date(o);isNaN(e.getTime())||s.push([t,e.toUTCString()])}else if("max-age"===t.toLowerCase()){const e=Number(o);isNaN(e)||e!=(0|e)||s.push([t,String(e)])}}const r=s.map(([e,t])=>t?`${e}=${t}`:`${e}`).join("; ");document.cookie=r}hasPreviouslyDeclinedConsent(){if(!this.hasUserInteracted())return!1;const e=this.getCurrentCookieObj(t.SHADOW_COOKIE_NAME);return e&&e.categories&&0===Object.keys(e.categories).length}}}));
//# sourceMappingURL=pkg-privacy-consent-pre-tti.min.js-vflq-SUlW.map